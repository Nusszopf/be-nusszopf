- table:
    schema: public
    name: leads
  object_relationships:
  - name: user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          email: email
  select_permissions:
  - role: user
    permission:
      columns:
      - hasConfirmed
      - id
      filter:
        _exists:
          _where:
            user:
              id:
                _eq: X-Hasura-User-Id
          _table:
            schema: public
            name: leads
- table:
    schema: public
    name: users
  object_relationships:
  - name: lead
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: leads
        column_mapping:
          email: email
  select_permissions:
  - role: user
    permission:
      columns:
      - email
      - id
      filter:
        id:
          _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        id:
          _eq: X-Hasura-User-Id
  event_triggers:
  - name: clean_up_deleted_user
    definition:
      enable_manual: false
      delete:
        columns: '*'
    retry_conf:
      num_retries: 3
      interval_sec: 10
      timeout_sec: 60
    webhook_from_env: ACCOUNT_ACTION_URL
    headers:
    - value: "12345"
      name: secret
